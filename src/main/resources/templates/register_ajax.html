<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>회원가입</title>
  <script>
    async function submitForm() {
      // 이름, 나이, 이메일을 JSON으로 묶어 
      const name = document.querySelector("#name").value;
      const age = document.querySelector("#age").value;
      const email = document.querySelector("#email").value;

      // json data
      const obj = {
        "name" : name,
        "age" : age,
        "email" : email
      }
      // form data
      const formData = new FormData(); 
      formData.append("name", name);
      formData.append("age", age);
      formData.append("email", email);

      // '/register-ajax'로 POST 요청을 보내고
      // [json data X] post 요청 시, body 속성과 formData 반드시 사용
      // [json data O] body에 json 문자열 & content-type에 application/json 반드시 사용
      const url = "http://localhost:8080/register-ajax";
      const res = await fetch(url, {
        headers : {
          "content-type" : 'application/json',
        },
        method : 'post',
        body : JSON.stringify(obj)
      });

      // 결과를 받아 출력
      const data = await res.text();
      console.log(data);
    }
  </script>
</head>

<body>
  <h2>회원가입 (AJAX)</h2>
  이름: <input id="name" type="text" name="name"><br>
  나이: <input id="age" type="number" name="age"><br>
  이메일: <input id="email" type="text" name="email"><br>
  <button onclick="submitForm()">제출</button>
  <p id="result"></p>
</body>

</html>